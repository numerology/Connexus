<!DOCTYPE html>
{% autoescape true %}
<html>
	<link href="//bootswatch.com/darkly/bootstrap.min.css" rel="stylesheet">
	<body>
		<div class="navbar-header">
          <a href="/management" class="navbar-brand">Connexus</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
		<div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
            <li>
              <a href="/management">Management</a>
            </li>
            <li>
              <a href="/stream_list">View All Streams</a>
            </li>
			<li>
              <a href="/stream_trending">Trending</a>
            </li>
		  </ul>
		  <form class="navbar-form navbar-left" action="/stream_search"  method="get">
        	<div class="form-group" align = "left">
				<label for = "search" class = "col-lg-5 control-label">Search</label>
          		<input type="text" class="form-control" name="search_keywords" autocomplete="off">
        	</div>
		  </form>
          <ul class="nav navbar-nav navbar-right">
            <li><a class="btn btn-primary" href="{{logout_url}}"> Logout</a></li>
          </ul>

        </div>
		<div class="col-lg-8 col-md-7 col-sm-6">
            <h1>Welcome to Connexus</h1>
            <p class="lead">{{String1}}</p>
			<p class="lead">This stream is viewed {{nviews}} times</p>
			{%if url_list|length == 0%}
			<p>Currently there is no image in this stream</p>
			{% endif %}

			<table class="table table-striped table-hover" style="width:1000px">


				{% for url in url_list %}
				  {% if loop.index0%3==0 %}
				  	<tr>
				  {% endif %}
				  	<td>{{loop.index0}}
						<img src = "{{url}}" height="500px">
				  	</td>
				  {% if loop.index%3==0 %}
				  	</tr>
				  {% endif %}
				{% endfor %}


			</table>
		</div>
		<div>
		    {% if show_subscribe_button%}
			<form class = "form-horizontal" action = "/subscribe/{{stream.key.id()}}" method = "get"> <!Subscribe call the method in SubscribeHandler>
				<p><input class = "btn btn-primary" type = "submit" value = "Subscribe"></p>
				<input type="hidden" name="return_url" value={{subscribe_return_url}}>
			</form>
			{% elif show_unsubscribe_button %}
			{{no_subscribe_message}}
			<form class = "form-horizontal" action = "/api/unsubscribe_stream" method = "post"> <!Unsubscribe stream>
				<p><input class = "btn btn-primary" type = "submit" value = "Unsubscribe"></p>
				<input type="hidden" name="stream_id" value="{{stream.key.id()}}">
				<input type="hidden" name="return_url" value="{{unsubscribe_return_url}}">
			</form>
			{% else %}
			<p>
			    {{no_subscribe_message}}
				{% if show_upload %}
				<form class = "form" action = "{{upload_url}}" method = "post" enctype = "multipart/form-data">
					<fieldset>
				    <legend>Adding a figure</legend>
				    <div class = "bs-docs-section">
					    <div class = "form-group">
					    	<label for = "file" class = "col-lg-2 control-label">File:</label>
					    	<div class="col-lg-10">
                          		<input type="file" class="form-control" name="file">
                        	</div>
					    </div>
					    <div class = "form-group">
						    <label for = "stream_name" class = "col-lg-2 control-label">Stream name</label>
						    <div class="col-lg-10">
                      		    <input type="text" class="form-control" readonly name="stream_name" value = "test1" placeholder="Name of stream accepting this figure">
                   		    </div>
					    </div>
				    </div>
				    <button type="submit" class="btn btn-primary">Upload</button>
				    </fieldset>
				</form>
			    {% endif %}
			</p>
			{% endif %}
		</div>
	</body>
</html>
{% endautoescape %}
